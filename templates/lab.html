{% extends "base.html" %}

{% block title %}{{ module_info.title }} - NLP Virtual Lab{% endblock %}

{% block content %}
<div class="row">
    <div class="col-12">
        <!-- Lab Header -->
        <div class="lab-header mb-4">
            <div class="d-flex align-items-center mb-3">
                <i data-feather="{{ module_info.icon }}" class="me-2"></i>
                <h1>{{ module_info.title }}</h1>
            </div>
            <p class="lead">{{ module_info.description }}</p>
            <div class="lab-actions">
                <a href="{{ url_for('quiz', module_name=module_name) }}" class="btn btn-outline-primary">
                    <i data-feather="help-circle"></i>
                    Take Quiz
                </a>
                <a href="{{ url_for('index') }}" class="btn btn-outline-secondary">
                    <i data-feather="arrow-left"></i>
                    Back to Home
                </a>
            </div>
        </div>

        <!-- Lab Content -->
        <div class="row">
            <!-- Input Section -->
            <div class="col-md-6">
                <div class="card">
                    <div class="card-header">
                        <h5 class="card-title mb-0">
                            <i data-feather="edit-3"></i>
                            Input Text
                        </h5>
                    </div>
                    <div class="card-body">
                        <div class="mb-3">
                            <label for="inputText" class="form-label">Enter your text:</label>
                            <textarea id="inputText" class="form-control" rows="6" 
                                placeholder="Type or paste your text here...">The quick brown fox jumps over the lazy dog. This is a sample sentence for NLP processing.</textarea>
                        </div>
                        
                        <!-- Operation Selection -->
                        <div class="mb-3" id="operationSelect">
                            <label for="operation" class="form-label">Select Operation:</label>
                            <select id="operation" class="form-select">
                                <!-- Options will be populated by JavaScript based on module -->
                            </select>
                        </div>
                        
                        <!-- Processing Controls -->
                        <div class="d-grid gap-2">
                            <button id="processBtn" class="btn btn-primary" type="button">
                                <i data-feather="play"></i>
                                Process Text
                            </button>
                            <button id="clearBtn" class="btn btn-outline-secondary" type="button">
                                <i data-feather="trash-2"></i>
                                Clear
                            </button>
                        </div>
                    </div>
                </div>
                
                <!-- Examples Section -->
                <div class="card mt-4">
                    <div class="card-header">
                        <h5 class="card-title mb-0">
                            <i data-feather="book"></i>
                            Example Texts
                        </h5>
                    </div>
                    <div class="card-body">
                        <div class="example-texts">
                            {% if module_name == 'text_summarization' %}
                            <button class="btn btn-sm btn-outline-info me-2 mb-2 example-btn" 
                                data-text="Artificial intelligence continues to expand across industries, with generative models assisting writers, designers, and programmers while classical systems optimize logistics and detect anomalies. Over the last few years, research has focused on aligning large models with human values, improving efficiency through quantization and distillation, and reducing hallucinations using retrieval techniques. Hospitals pilot clinical summarization tools to support physicians, while schools explore adaptive tutoring with strict privacy protections. Regulators publish risk based frameworks, encouraging transparent evaluations, dataset documentation, and accessible red teaming reports. Startups ship lightweight on device models that protect data and cut latency, and cloud providers offer managed pipelines for training and deployment. Despite the momentum, experts stress responsible use, careful measurement, and inclusive governance so the benefits reach small businesses, students, and communities worldwide.">
                                Tech News
                            </button>
                            <button class="btn btn-sm btn-outline-info me-2 mb-2 example-btn" 
                                data-text="Regular physical activity supports the heart, lungs, and metabolism by strengthening muscles, improving circulation, and balancing blood sugar. Health guidelines recommend at least one hundred fifty minutes of moderate aerobic exercise each week, plus two sessions of strength training that target major muscle groups. Brisk walking, cycling, swimming, dancing, and climbing stairs are effective, low cost options that fit busy schedules. Short movement breaks during long study or work periods reduce stiffness and boost focus. Adequate hydration, fiber rich meals, and consistent sleep help recovery and performance. Beginners should start slowly, warm up, and increase intensity over several weeks to avoid injury. People with medical conditions can consult a clinician to tailor activities. The most important habit is choosing enjoyable routines that you can maintain, share with friends, and celebrate over time.">
                                Health Article
                            </button>
                            <button class="btn btn-sm btn-outline-info me-2 mb-2 example-btn" 
                                data-text="In nineteen sixty nine the Apollo eleven mission carried astronauts Neil Armstrong, Buzz Aldrin, and Michael Collins to the Moon after years of engineering effort. The spacecraft consisted of the command module Columbia and the lunar module Eagle, launched atop a Saturn five rocket from Florida. After entering lunar orbit, Armstrong and Aldrin descended to the surface, landed at the Sea of Tranquility, and conducted experiments, photography, and sample collection. Millions watched televised images as Armstrong stepped onto the surface and described the moment as a small step for a man and a giant leap for mankind. The crew returned safely to Earth with precious rocks and data that transformed planetary science, inspired new generations of engineers, and laid a foundation for ongoing exploration programs.">
                                History Article
                            </button>
                            <button class="btn btn-sm btn-outline-info me-2 mb-2 example-btn" 
                                data-text="Researchers analyzed ten thousand customer reviews from multiple regions to understand satisfaction drivers, recurring complaints, and language differences. Using topic modeling and sentiment analysis, they identified themes such as documentation clarity, onboarding speed, product reliability, and response time from support teams. Positive ratings clustered around clear setup guides, consistent updates, and proactive communication before issues escalated. Negative feedback frequently cited confusing error messages, slow account recovery, and limited self service tools. The authors recommend investing in searchable knowledge bases, tutorial videos, and in product guidance that adapts to user behavior. They also propose service level targets, transparent status pages, and structured feedback channels. According to follow up experiments, small improvements in guidance and responsiveness produced meaningful gains in retention and word of mouth.">
                                Research Summary
                            </button>
                            {% elif module_name == 'text_generation' %}
                            <button class="btn btn-sm btn-outline-info me-2 mb-2 example-btn" 
                                data-text="Once upon a time in a small village, a young boy discovered">
                                Story Prompt
                            </button>
                            <button class="btn btn-sm btn-outline-info me-2 mb-2 example-btn" 
                                data-text="Artificial Intelligence will change the future of education because">
                                Technology Prompt
                            </button>
                            <button class="btn btn-sm btn-outline-info me-2 mb-2 example-btn" 
                                data-text="Human: Hello there! \nAI:">
                                Dialogue Prompt
                            </button>
                            <button class="btn btn-sm btn-outline-info me-2 mb-2 example-btn" 
                                data-text="Write a Python function to check if a number is prime:">
                                Code Prompt
                            </button>
                            {% else %}
                            <button class="btn btn-sm btn-outline-info me-2 mb-2 example-btn" 
                                data-text="The quick brown fox jumps over the lazy dog.">
                                Simple Sentence
                            </button>
                            <button class="btn btn-sm btn-outline-info me-2 mb-2 example-btn" 
                                data-text="Apple Inc. was founded by Steve Jobs in Cupertino, California in 1976.">
                                Named Entities
                            </button>
                            <button class="btn btn-sm btn-outline-info me-2 mb-2 example-btn" 
                                data-text="I love this product! It's amazing and works perfectly. Best purchase ever!">
                                Positive Sentiment
                            </button>
                            <button class="btn btn-sm btn-outline-info me-2 mb-2 example-btn" 
                                data-text="This is terrible. I hate it and want my money back. Worst experience ever!">
                                Negative Sentiment
                            </button>
                            {% endif %}
                        </div>
                    </div>
                </div>
            </div>

            <!-- Output Section -->
            <div class="col-md-6">
                <div class="card">
                    <div class="card-header">
                        <h5 class="card-title mb-0">
                            <i data-feather="monitor"></i>
                            Results
                        </h5>
                    </div>
                    <div class="card-body">
                        <div id="processingSpinner" class="text-center" style="display: none;">
                            <div class="spinner-border text-primary" role="status">
                                <span class="visually-hidden">Processing...</span>
                            </div>
                            <p class="mt-2">Processing your text...</p>
                        </div>
                        
                        <div id="results" class="results-container">
                            <div class="alert alert-info">
                                <i data-feather="info"></i>
                                Enter some text and click "Process Text" to see the results here.
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Visualization Section -->
                <div class="card mt-4">
                    <div class="card-header">
                        <h5 class="card-title mb-0">
                            <i data-feather="bar-chart-2"></i>
                            Visualization
                        </h5>
                    </div>
                    <div class="card-body">
                        <div id="visualization" class="visualization-container">
                            <div class="alert alert-secondary">
                                <i data-feather="eye"></i>
                                Visual representation will appear here after processing.
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Explanation Section -->
        <div class="row mt-4">
            <div class="col-12">
                <div class="card">
                    <div class="card-header">
                        <h5 class="card-title mb-0">
                            <i data-feather="info"></i>
                            Understanding {{ module_info.title }}
                        </h5>
                    </div>
                    <div class="card-body">
                        <div id="explanationContent">
                            <!-- Content will be populated by JavaScript -->
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block scripts %}
<script src="{{ url_for('static', filename='js/lab.js') }}"></script>
<script src="{{ url_for('static', filename='js/visualizations.js') }}"></script>
<script>
    // Initialize the lab with the current module
    document.addEventListener('DOMContentLoaded', function() {
        initializeLab('{{ module_name }}');
    });
</script>
{% endblock %}
