{% extends "base.html" %}

{% block title %}{{ module_info.title }} - NLP Virtual Lab{% endblock %}

{% block content %}
<div class="row">
    <div class="col-12">
        <!-- Lab Header -->
        <div class="lab-header mb-4">
            <div class="d-flex align-items-center mb-3">
                <i data-feather="{{ module_info.icon }}" class="me-2"></i>
                <h1>{{ module_info.title }}</h1>
            </div>
            <p class="lead">{{ module_info.description }}</p>
            <div class="lab-actions">
                <a href="{{ url_for('quiz', module_name=module_name) }}" class="btn btn-outline-primary">
                    <i data-feather="help-circle"></i>
                    Take Quiz
                </a>
                <a href="{{ url_for('index') }}" class="btn btn-outline-secondary">
                    <i data-feather="arrow-left"></i>
                    Back to Home
                </a>
            </div>
        </div>

        <!-- Lab Content -->
        <div class="row">
            <!-- Input Section -->
            <div class="col-md-6">
                <div class="card">
                    <div class="card-header">
                        <h5 class="card-title mb-0">
                            <i data-feather="edit-3"></i>
                            Input Text
                        </h5>
                    </div>
                    <div class="card-body">
                        <div class="mb-3">
                            <label for="inputText" class="form-label">Enter your text:</label>
                            <textarea id="inputText" class="form-control" rows="6" 
                                placeholder="Type or paste your text here...">The quick brown fox jumps over the lazy dog. This is a sample sentence for NLP processing.</textarea>
                        </div>
                        
                        <!-- Operation Selection -->
                        <div class="mb-3" id="operationSelect">
                            <label for="operation" class="form-label">Select Operation:</label>
                            <select id="operation" class="form-select">
                                <!-- Options will be populated by JavaScript based on module -->
                            </select>
                        </div>
                        
                        <!-- Processing Controls -->
                        <div class="d-grid gap-2">
                            <button id="processBtn" class="btn btn-primary" type="button">
                                <i data-feather="play"></i>
                                Process Text
                            </button>
                            <button id="clearBtn" class="btn btn-outline-secondary" type="button">
                                <i data-feather="trash-2"></i>
                                Clear
                            </button>
                        </div>
                    </div>
                </div>
                
                <!-- Examples Section -->
                <div class="card mt-4">
                    <div class="card-header">
                        <h5 class="card-title mb-0">
                            <i data-feather="book"></i>
                            Example Texts
                        </h5>
                    </div>
                    <div class="card-body">
                        <div class="example-texts">
                            {% if module_name == 'text_summarization' %}
                            <button class="btn btn-sm btn-outline-info me-2 mb-2 example-btn" 
                                data-text="Artificial intelligence continues to expand across industries, with generative models assisting writers, designers, and programmers while classical systems optimize logistics and detect anomalies. Over the last few years, research has focused on aligning large models with human values, improving efficiency through quantization and distillation, and reducing hallucinations using retrieval techniques. Hospitals pilot clinical summarization tools to support physicians, while schools explore adaptive tutoring with strict privacy protections. Regulators publish risk based frameworks, encouraging transparent evaluations, dataset documentation, and accessible red teaming reports. Startups ship lightweight on device models that protect data and cut latency, and cloud providers offer managed pipelines for training and deployment. Despite the momentum, experts stress responsible use, careful measurement, and inclusive governance so the benefits reach small businesses, students, and communities worldwide.">
                                Tech News
                            </button>
                            <button class="btn btn-sm btn-outline-info me-2 mb-2 example-btn" 
                                data-text="Regular physical activity supports the heart, lungs, and metabolism by strengthening muscles, improving circulation, and balancing blood sugar. Health guidelines recommend at least one hundred fifty minutes of moderate aerobic exercise each week, plus two sessions of strength training that target major muscle groups. Brisk walking, cycling, swimming, dancing, and climbing stairs are effective, low cost options that fit busy schedules. Short movement breaks during long study or work periods reduce stiffness and boost focus. Adequate hydration, fiber rich meals, and consistent sleep help recovery and performance. Beginners should start slowly, warm up, and increase intensity over several weeks to avoid injury. People with medical conditions can consult a clinician to tailor activities. The most important habit is choosing enjoyable routines that you can maintain, share with friends, and celebrate over time.">
                                Health Article
                            </button>
                            <button class="btn btn-sm btn-outline-info me-2 mb-2 example-btn" 
                                data-text="In nineteen sixty nine the Apollo eleven mission carried astronauts Neil Armstrong, Buzz Aldrin, and Michael Collins to the Moon after years of engineering effort. The spacecraft consisted of the command module Columbia and the lunar module Eagle, launched atop a Saturn five rocket from Florida. After entering lunar orbit, Armstrong and Aldrin descended to the surface, landed at the Sea of Tranquility, and conducted experiments, photography, and sample collection. Millions watched televised images as Armstrong stepped onto the surface and described the moment as a small step for a man and a giant leap for mankind. The crew returned safely to Earth with precious rocks and data that transformed planetary science, inspired new generations of engineers, and laid a foundation for ongoing exploration programs.">
                                History Article
                            </button>
                            <button class="btn btn-sm btn-outline-info me-2 mb-2 example-btn" 
                                data-text="Researchers analyzed ten thousand customer reviews from multiple regions to understand satisfaction drivers, recurring complaints, and language differences. Using topic modeling and sentiment analysis, they identified themes such as documentation clarity, onboarding speed, product reliability, and response time from support teams. Positive ratings clustered around clear setup guides, consistent updates, and proactive communication before issues escalated. Negative feedback frequently cited confusing error messages, slow account recovery, and limited self service tools. The authors recommend investing in searchable knowledge bases, tutorial videos, and in product guidance that adapts to user behavior. They also propose service level targets, transparent status pages, and structured feedback channels. According to follow up experiments, small improvements in guidance and responsiveness produced meaningful gains in retention and word of mouth.">
                                Research Summary
                            </button>
                            {% elif module_name == 'text_classification' %}
                            <button class="btn btn-sm btn-outline-info me-2 mb-2 example-btn" 
                                data-text="The startup launched a cloud-based analytics platform to help companies track revenue and customer growth across markets, integrating with existing sales tools and dashboards.">
                                Business
                            </button>
                            <button class="btn btn-sm btn-outline-info me-2 mb-2 example-btn" 
                                data-text="Researchers used a neural network to classify images, deploying the model on edge devices with optimized inference and quantization techniques.">
                                Technology
                            </button>
                            <button class="btn btn-sm btn-outline-info me-2 mb-2 example-btn" 
                                data-text="The team secured a 2-1 win in the championship match after a dramatic goal in the final minutes, with the coach praising the defense.">
                                Sports
                            </button>
                            <button class="btn btn-sm btn-outline-info me-2 mb-2 example-btn" 
                                data-text="The parliament debated a new bill on data privacy, with party leaders urging transparent policy and fair enforcement.">
                                Politics
                            </button>
                            <button class="btn btn-sm btn-outline-info me-2 mb-2 example-btn" 
                                data-text="Doctors recommended a balanced diet, regular exercise, and timely vaccination to reduce the risk of chronic disease and improve mental health.">
                                Health
                            </button>
                            <button class="btn btn-sm btn-outline-info me-2 mb-2 example-btn" 
                                data-text="University students prepared for final exams, attending lectures, submitting assignments, and conducting research in the laboratory.">
                                Education
                            </button>
                            <button class="btn btn-sm btn-outline-info me-2 mb-2 example-btn" 
                                data-text="The film's lead actor announced a worldwide tour to promote the new movie, while the soundtrack topped music charts.">
                                Entertainment
                            </button>
                            <button class="btn btn-sm btn-outline-info me-2 mb-2 example-btn" 
                                data-text="Astronomers observed a distant galaxy to test a new theory in astrophysics, using advanced instruments to study quantum effects.">
                                Science
                            </button>
                            <button class="btn btn-sm btn-outline-danger me-2 mb-2 example-btn" 
                                data-text="Congratulations! You have won a cash prize. Click the link to claim your reward now. Limited time offer.">
                                Spam
                            </button>
                            <button class="btn btn-sm btn-outline-success me-2 mb-2 example-btn" 
                                data-text="Hi team, please review the project report and join the meeting at 3 PM. Let me know if you have questions.">
                                Not Spam
                            </button>
                            <button class="btn btn-sm btn-outline-warning me-2 mb-2 example-btn" 
                                data-text="University students attended a lecture on machine learning and programming where a company presented market growth and revenue strategy. The government announced a new policy after the election, while the coach discussed the team's goal in the championship match. Doctors at the hospital recommended vaccine updates for public health. Meanwhile, a research laboratory conducted an experiment in physics, and an actor promoted a new film with music from the soundtrack.">
                                Mixed Topics (All Classes)
                            </button>
                            {% elif module_name == 'word_embeddings' %}
                            <button class="btn btn-sm btn-outline-info me-2 mb-2 example-btn" 
                                data-text="king queen man woman prince princess royal palace">
                                Royalty (king-queen-man-woman)
                            </button>
                            <button class="btn btn-sm btn-outline-info me-2 mb-2 example-btn" 
                                data-text="france paris germany berlin italy rome spain madrid europe capital city">
                                Countries and Capitals
                            </button>
                            <button class="btn btn-sm btn-outline-info me-2 mb-2 example-btn" 
                                data-text="cat dog tiger lion animal pet wild feline canine">
                                Animals and Species
                            </button>
                            <button class="btn btn-sm btn-outline-info me-2 mb-2 example-btn" 
                                data-text="computer software hardware network server data algorithm model learning">
                                Technology Terms
                            </button>
                            <button class="btn btn-sm btn-outline-info me-2 mb-2 example-btn" 
                                data-text="run running ran walk walking walked jump jumping jumped">
                                Verb Forms
                            </button>
                            <button class="btn btn-sm btn-outline-info me-2 mb-2 example-btn" 
                                data-text="big large huge small tiny little fast quick rapid slow sluggish">
                                Adjectives (Synonyms/Antonyms)
                            </button>
                            
                            {% elif module_name == 'text_generation' %}
                            <button class="btn btn-sm btn-outline-info me-2 mb-2 example-btn" 
                                data-text="Once upon a time in a small village, a young boy discovered">
                                Story Prompt
                            </button>
                            <button class="btn btn-sm btn-outline-info me-2 mb-2 example-btn" 
                                data-text="Artificial Intelligence will change the future of education because">
                                Technology Prompt
                            </button>
                            <button class="btn btn-sm btn-outline-info me-2 mb-2 example-btn" 
                                data-text="Human: Hello there! \nAI:">
                                Dialogue Prompt
                            </button>
                            <button class="btn btn-sm btn-outline-info me-2 mb-2 example-btn" 
                                data-text="Write a Python function to check if a number is prime:">
                                Code Prompt
                            </button>
                            {% elif module_name == 'question_answering' %}
                            <button class="btn btn-sm btn-outline-info me-2 mb-2 example-btn" 
                                data-text="Artificial Intelligence (AI) is a branch of computer science that aims to create machines capable of performing tasks that typically require human intelligence. These tasks include learning, reasoning, problem-solving, perception, and language understanding. AI systems can be categorized into narrow AI, which is designed for specific tasks like image recognition or chess playing, and general AI, which would have human-like cognitive abilities across various domains. Machine learning, a subset of AI, enables computers to learn and improve from experience without being explicitly programmed for every scenario."
                                data-questions='["What is Artificial Intelligence?", "What tasks can AI systems perform?", "What is the difference between narrow AI and general AI?", "What is machine learning?", "How do machine learning systems improve?"]'>
                                Artificial Intelligence
                            </button>
                            <button class="btn btn-sm btn-outline-info me-2 mb-2 example-btn" 
                                data-text="Climate change refers to long-term shifts in global temperatures and weather patterns. While climate variations are natural, human activities have been the main driver of climate change since the 1800s, primarily through burning fossil fuels like coal, oil, and gas. This releases greenhouse gases such as carbon dioxide into the atmosphere, which trap heat from the sun and cause global temperatures to rise. The effects include melting ice caps, rising sea levels, extreme weather events, and disruptions to ecosystems and agriculture."
                                data-questions='["What is climate change?", "What is the main cause of recent climate change?", "Which gases contribute to the greenhouse effect?", "What are some effects of climate change?", "Since when have human activities been the main driver of climate change?"]'>
                                Climate Change
                            </button>
                            <button class="btn btn-sm btn-outline-info me-2 mb-2 example-btn" 
                                data-text="The human brain is the most complex organ in the body, containing approximately 86 billion neurons that communicate through electrical and chemical signals. It is divided into several regions, each responsible for different functions. The cerebrum, the largest part, handles conscious thought, memory, and voluntary movements. The cerebellum coordinates balance and movement, while the brainstem controls vital functions like breathing and heart rate. The brain consumes about 20% of the body's total energy despite weighing only about 2% of body weight."
                                data-questions='["How many neurons are in the human brain?", "What is the largest part of the brain called?", "What does the cerebellum control?", "What functions does the brainstem control?", "How much energy does the brain consume?"]'>
                                Human Brain
                            </button>
                            <button class="btn btn-sm btn-outline-info me-2 mb-2 example-btn" 
                                data-text="Renewable energy comes from natural sources that are constantly replenished, such as sunlight, wind, rain, tides, waves, and geothermal heat. Unlike fossil fuels, renewable energy sources produce little to no greenhouse gas emissions during operation. Solar power harnesses energy from the sun using photovoltaic cells or solar thermal systems. Wind power uses turbines to convert kinetic energy from moving air into electricity. Hydroelectric power generates electricity from flowing water, while geothermal energy taps into heat from the Earth's core."
                                data-questions='["What are renewable energy sources?", "How do renewable energy sources differ from fossil fuels?", "How does solar power work?", "What does wind power convert into electricity?", "What is geothermal energy?"]'>
                                Renewable Energy
                            </button>
                            <button class="btn btn-sm btn-outline-info me-2 mb-2 example-btn" 
                                data-text="The Internet is a global network of interconnected computers that communicate using standardized protocols. It was originally developed in the 1960s as ARPANET, a project funded by the U.S. Department of Defense. The World Wide Web, created by Tim Berners-Lee in 1989, made the Internet accessible to the general public by providing a user-friendly way to access and share information. Today, the Internet connects billions of devices worldwide and has revolutionized communication, commerce, education, and entertainment."
                                data-questions='["What is the Internet?", "What was the original name of the Internet?", "Who created the World Wide Web?", "When was the World Wide Web created?", "How has the Internet impacted society?"]'>
                                The Internet
                            </button>
                            <button class="btn btn-sm btn-outline-info me-2 mb-2 example-btn" 
                                data-text="Space exploration began in the mid-20th century with the launch of artificial satellites. The Soviet Union achieved several early milestones, including launching Sputnik 1 in 1957 and sending Yuri Gagarin as the first human into space in 1961. The United States responded with the Apollo program, successfully landing Neil Armstrong and Buzz Aldrin on the Moon in 1969. Modern space exploration includes robotic missions to Mars, the International Space Station, and private companies like SpaceX developing reusable rockets to reduce the cost of space travel."
                                data-questions='["When did space exploration begin?", "What was the first artificial satellite?", "Who was the first human in space?", "When did humans first land on the Moon?", "What are some modern developments in space exploration?"]'>
                                Space Exploration
                            </button>
                            {% elif module_name == 'chunking' %}
                            <button class="btn btn-sm btn-outline-info me-2 mb-2 example-btn" 
                                data-text="The dog chased the cat">
                                The dog chased the cat
                            </button>
                            <button class="btn btn-sm btn-outline-info me-2 mb-2 example-btn" 
                                data-text="She runs quickly">
                                She runs quickly
                            </button>
                            <button class="btn btn-sm btn-outline-info me-2 mb-2 example-btn" 
                                data-text="The big house collapsed suddenly">
                                The big house collapsed suddenly
                            </button>
                            <button class="btn btn-sm btn-outline-info me-2 mb-2 example-btn" 
                                data-text="The book is on the table">
                                The book is on the table
                            </button>
                            <button class="btn btn-sm btn-outline-info me-2 mb-2 example-btn" 
                                data-text="I like apples and she likes oranges">
                                I like apples and she likes oranges
                            </button>
                            <button class="btn btn-sm btn-outline-info me-2 mb-2 example-btn" 
                                data-text="Wow He is a good singer">
                                Wow He is a good singer
                            </button>
                            {% else %}
                            <button class="btn btn-sm btn-outline-info me-2 mb-2 example-btn" 
                                data-text="The quick brown fox jumps over the lazy dog.">
                                Simple Sentence
                            </button>
                            <button class="btn btn-sm btn-outline-info me-2 mb-2 example-btn" 
                                data-text="Apple Inc. was founded by Steve Jobs in Cupertino, California in 1976.">
                                Named Entities
                            </button>
                            <button class="btn btn-sm btn-outline-info me-2 mb-2 example-btn" 
                                data-text="I love this product! It's amazing and works perfectly. Best purchase ever!">
                                Positive Sentiment
                            </button>
                            <button class="btn btn-sm btn-outline-info me-2 mb-2 example-btn" 
                                data-text="This is terrible. I hate it and want my money back. Worst experience ever!">
                                Negative Sentiment
                            </button>
                            {% endif %}
                        </div>
                    </div>
                </div>
            </div>

            <!-- Output Section -->
            <div class="col-md-6">
                <div class="card">
                    <div class="card-header">
                        <h5 class="card-title mb-0">
                            <i data-feather="monitor"></i>
                            Results
                        </h5>
                    </div>
                    <div class="card-body">
                        <div id="processingSpinner" class="text-center" style="display: none;">
                            <div class="spinner-border text-primary" role="status">
                                <span class="visually-hidden">Processing...</span>
                            </div>
                            <p class="mt-2">Processing your text...</p>
                        </div>
                        
                        <div id="results" class="results-container">
                            <div class="alert alert-info">
                                <i data-feather="info"></i>
                                Enter some text and click "Process Text" to see the results here.
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Visualization Section -->
                <div class="card mt-4">
                    <div class="card-header">
                        <h5 class="card-title mb-0">
                            <i data-feather="bar-chart-2"></i>
                            Visualization
                        </h5>
                    </div>
                    <div class="card-body">
                        <div id="visualization" class="visualization-container">
                            <div class="alert alert-secondary">
                                <i data-feather="eye"></i>
                                Visual representation will appear here after processing.
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Explanation Section -->
        <div class="row mt-4">
            <div class="col-12">
                <div class="card">
                    <div class="card-header">
                        <h5 class="card-title mb-0">
                            <i data-feather="info"></i>
                            Understanding {{ module_info.title }}
                        </h5>
                    </div>
                    <div class="card-body">
                        <div id="explanationContent">
                            <!-- Content will be populated by JavaScript -->
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block scripts %}
<script src="{{ url_for('static', filename='js/lab.js') }}"></script>
<script src="{{ url_for('static', filename='js/visualizations.js') }}"></script>
<script>
    // Initialize the lab with the current module
    document.addEventListener('DOMContentLoaded', function() {
        initializeLab('{{ module_name }}');
    });
</script>
{% endblock %}
